<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{{ title if title else "DOS Console" }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS (local) -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

    <!-- Custom Terminal Theme -->
    <link rel="stylesheet" href="/static/css/app.css">
</head>

<body class="font-monospace">

    <nav class="navbar-terminal d-flex justify-content-between align-items-center px-4 py-3 sticky-top">
        <div class="terminal-prompt">
            <span class="user-host">root@assurance:</span><span class="path">~#</span> 
            <span class="command">
                {% set current_path = request.url.path %}
                {% if current_path == "/auth/login" or current_path == "/auth/login/" %}
                    cat ./auth/login.cred
                {% elif current_path.startswith("/devices") %}
                    ls ./devices
                {% elif current_path.startswith("/backup") %}
                    cat ./backup/logs
                {% elif current_path.startswith("/ping") %}
                    ping -c 4 {{ current_path.split('/')[-2] if current_path.split('/')|length > 2 else 'device' }}
                {% elif current_path.startswith("/restart") %}
                    systemctl restart {{ current_path.split('/')[-2] if current_path.split('/')|length > 2 else 'service' }}
                {% else %}
                    ls ./navigation
                {% endif %}
            </span>
            <span class="cursor"></span>
        </div>

        <div class="d-flex align-items-center gap-4">
            <a href="/devices" class="nav-link-cli">/devices</a>
            <a href="/devices" class="nav-link-cli">/backup-jobs</a>
            <a href="/devices" class="nav-link-cli">/logs</a>
            <a href="/auth/login" class="nav-link-cli logout">[ LOGOUT ]</a>
        </div>
    </nav>

    <div class="container-fluid p-4 main-content">
        {% block content %}
        {% endblock %}
    </div>

    <footer class="terminal-footer px-3 py-1 d-flex justify-content-between align-items-center fixed-bottom">
        <div class="text-success">SYS: ONLINE</div>
        <div class="text-success">ASSURANCE_PLATFORM_V1.0</div>
        <div class="text-uppercase" style="color: #ff9800;"><span class="blink">‚óè</span> LIVE FEED ACTIVE</div>
    </footer>

    <!-- Bootstrap JS Bundle (includes Popper for accordion) -->
    <script src="/static/js/bootstrap.bundle.min.js"></script>

</body>
</html>